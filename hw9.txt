grigory.kislin [11:34 PM] 
joined #hw9.


grigory.kislin [11:34 PM] 
set the channel topic: https://github.com/JavaWebinar/topjava/blob/doc/doc/lesson09.md


grigory.kislin [11:35 PM] 
Готово 9е занятие
Наконец делаем настоящую авторизацию, ее тестирование и отрисовку таблиц по AJAX.


[11:35] 
успехов!


Constantine [11:38 PM] 
joined #hw9 along with 18 others.



----- Today January 9th, 2018 -----
vsimonov [11:11 AM] 
патч Apply 9_03_HW8_enable_disable.patch не встаёт из-за public void testEnable() , у всех так?

Антон Кляшторный [6 hours ago] 
похоже так


Pavel [4 hours ago] 
+1


Katherine Buzatu [3 hours ago] 
У меня 9_03_HW8 без проблем.


tema.emelyan [3 hours ago] 
тоже без проблем


itAvgur [14 minutes ago] 
no problem!


Dmitry Makarov [12 minutes ago] 
все ок

shaakem [15 hours ago] 
Все норм. В Version Control чисто перед накаткой?


Andrew [15 hours ago] 
Такая же беда...


Andrew [14 hours ago] 
Как вы решили проблему?


Katherine Buzatu [14 hours ago] 
А при накатке все изменения были отмечены?


Andrew [14 hours ago] 
Да


Andrew [14 hours ago] 
Откатился, и не помогло- Киньте пожалуйста класс после этого патча, чтобы проигнорировать ханки


Katherine Buzatu [14 hours ago] 
А класс какой?


Andrew [14 hours ago] 
AbstractUserServiceTest


Few [5:49 PM] 
IP адрес getbootstrap.com внесен Роскомнадзором в реестр запрещенных (на этом же IP адресе якобы детское порно)
мой "ответственный" провайдер заблокировал :slightly_smiling_face:

itAvgur [17 hours ago] 
Кстати, не только он.
Еще какие-то сайты программерской направленности попадались, которые работали ТОЛЬКО из-под того же FreeGate'а. (edited)


Dmitry Makarov [17 hours ago] 
у вас хотя бы пишет, что сайт заблокирован. У меня заблокированные сайты просто не грузятся


Few [17 hours ago] 
да у меня так же, я через ТП узнал что он заблокирован
предъявил им что они могли бы хоть простенькую страничку с причиной выводить...


dart_rabbit [8:12 PM] 
Я так понимаю, что to мы вводим ради ajax и прямого биндинга объектов? Потому как скрыть поля обычном rest можно и через @JsonIgnore.

Katherine Buzatu [15 hours ago] 
А как же exceeded? Это отдельное поле, нужное только для фронта.


vch [15 hours ago] 
а его тоже можно в entity указать, пометив как `@Transient` :slightly_smiling_face:


Andrew [8:51 PM] 
9_03_HW8_enable_disable.patch: проблема с накаткой тоже. Сверил код с базой - этот класс идентичен. В чём же соль?


[8:54] 
В итоге должен какой класс получится?


Katherine Buzatu [9:05 PM] 
added this Java snippet: AbstractUserServiceTest.java
package ru.javawebinar.topjava.service;
​
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.cache.CacheManager;
import org.springframework.dao.DataAccessException;
import ru.javawebinar.topjava.model.Role;
import ru.javawebinar.topjava.model.User;
import ru.javawebinar.topjava.util.exception.NotFoundException;
​
import java.util.Collections;
import java.util.Date;
import java.util.List;
​
import static ru.javawebinar.topjava.UserTestData.*;
​
public abstract class AbstractUserServiceTest extends AbstractServiceTest {
​
  @Autowired
  protected UserService service;
​
  @Autowired
  private CacheManager cacheManager;
​
  @Before
  public void setUp() throws Exception {
    cacheManager.getCache("users").clear();
  }
​
  @Test
  public void create() throws Exception {
    User newUser = new User(null, "New", "new@gmail.com", "newPass", 1555, false, new Date(), Collections.singleton(Role.ROLE_USER));
    User created = service.create(newUser);
    newUser.setId(created.getId());
    assertMatch(service.getAll(), ADMIN, newUser, USER);
  }
​
  @Test(expected = DataAccessException.class)
  public void duplicateMailCreate() throws Exception {
    service.create(new User(null, "Duplicate", "user@yandex.ru", "newPass", Role.ROLE_USER));
  }
​
  @Test
  public void delete() throws Exception {
    service.delete(USER_ID);
    assertMatch(service.getAll(), ADMIN);
  }
​
  @Test(expected = NotFoundException.class)
  public void notFoundDelete() throws Exception {
    service.delete(1);
  }
​
  @Test
  public void get() throws Exception {
    User user = service.get(ADMIN_ID);
    assertMatch(user, ADMIN);
  }
​
  @Test(expected = NotFoundException.class)
  public void getNotFound() throws Exception {
    service.get(1);
  }
​
  @Test
  public void getByEmail() throws Exception {
    User user = service.getByEmail("admin@gmail.com");
    assertMatch(user, ADMIN);
  }
​
  @Test
  public void update() throws Exception {
    User updated = new User(USER);
    updated.setName("UpdatedName");
    updated.setCaloriesPerDay(330);
    updated.setRoles(Collections.singletonList(Role.ROLE_ADMIN));
    service.update(updated);
    assertMatch(service.get(USER_ID), updated);
  }
​
  @Test
  public void getAll() throws Exception {
    List<User> all = service.getAll();
    assertMatch(all, ADMIN, USER);
  }
​
  @Test
  public void testEnable() {
    service.enable(USER_ID, false);
    Assert.assertFalse(service.get(USER_ID).isEnabled());
    service.enable(USER_ID, true);
    Assert.assertTrue(service.get(USER_ID).isEnabled());
  }
}
Add Comment Collapse




grigory.kislin [9:20 PM] 
сегодня письмо с меня и счас патчи вчекиню



----- Today January 10th, 2018 -----
Viktor [3:06 AM] 
мне интересно стало, почему методы конвертации UserTo в User и обратно вынесены в утильный класс. Почему бы не научить сам UserTo конвертироваться и создаваться из User'a. Есть ли какая-то важная причина использованию утилитарного класса, или просто так принято?


tema.emelyan [3:18 AM] 
@Viktor я слышал, что в то никакую логику обычно не помещают, только данные (edited)

itAvgur [6 hours ago] 
Иногда с припиской: "Если оооочень хочется, то можно".
Вообщем, вопрос стиля.


Konstantin [9:40 AM] 
Джаваскриптовая часть тяжело дается что-то. Вроде прошелся по основным разделам на w3schools.com. Там все легкие примеры, в проекте все фреймворки намешаны в кучу и возникает путанница


Alexander _Gubanow [10:12 AM] 
В нашем проекте Ajax запросы инициализируются браузером при выполнении пользователем каких-то действий,отсылаются на сервер. После обработки на сервере и получения ответа от сервера (по событию success в Ajax-запросе)   перерисовывается таблица с данными. А как реализовать функционал приложения, если сервер является инициализатором отправки данных? Например, на сервере есть какая-то очередь, куда складываются сообщения от разных пользователей, или пишутся логи от всех  событий на сервере, а сервер должен потом автоматически и динамически(то есть при появлении нового сообщения в очереди) отправить эти сообщения и показать пользователям в браузере.


Few [10:51 AM] 
Для этих целей Спринг предлагает WebSockets+SockJS+STOMP (Spring in Action, 4-е издание, глава 18) (edited)

Alexander _Gubanow [19 hours ago] 
@Few Спасибо. Почитал про WebSockets - там немного другая технология передачи данных. Всегда открыто дуплексное  соединение клиент/сервер после подключения клиента, в отличие от HTTP, где соединение происходит на время передачи данных. Хотелось все же услышать мнение гуру, если реализовать указанный выше функционал, например,если клиент будет  генерить каждые  n   секунд запросы на сервер по ajax - это не будет выглядить топорно в плане архитектуры приложения (с позиции  будущего работодателя)?


Few [18 hours ago] 
По описанной тобой логике, как раз видится наиболее правильным чтобы сервер отправлял сообщения подписавшимся на них клиентам . А для этого как раз STOMP лучше всего и подходит. Он в том числе отлично интегрируется с spring security (edited)


Few [18 hours ago] 
Хотя мнение гуру всегда интересно, ждем


philip.goldm [12:16 PM] 
@grigory.kislin обнаружил в Apply 9_07_datatable_via_ajax.patch небольшую проблему. 
В RootController убирается добавление списка пользователей из атрибутов модели
>model.addAttribute("users", userService.getAll());
Из-за этого падают тесты в RootControllerTest. Там есть проверки на наличие атрибута
>.andExpect(model().attribute("users", hasSize(2)))


Atrieron [1:19 PM] 
А у меня одного уже которое занятие не патчится список ролей админа в populateDB.sql? Приходится каждый раз заново заносить.

Katherine Buzatu [1 day ago] 
Роли были добавлены в 7_04_HW6. В патчах содержатся только последние изменения. Попробуй накатить из этого патча только изменения populate. И закоммитить в мастере. Я так думаю.


grigory.kislin [5:17 PM] 
@philip.goldm так и есть. но почему- проблема?

philip.goldm [22 hours ago] 
Да, уже догодался :)


MetalBro [4:18 AM] 
В чем заключается преимущество создания DTO если мы не формируем его из несвязанных сущностей или сущности с данными, не хранимыми в базе (типа MealWithExceed)? Например, userTo представляет собой урезанного User.  Для удобства работы на фронтенде (если точно известна его структура)?
1 reply Today at 12:09 PM View thread

Ivanushka [9:57 AM] 
added and commented on this Java snippet: Господа (товарищи) ткните пальцем...
Есть два контроллера c методом getAll():
@RestController
@RequestMapping("/ajax/admin/users")
public class AdminAjaxController extends AbstractUserController {
​
  @Override
  @GetMapping(produces = MediaType.APPLICATION_JSON_VALUE)
  public List<User> getAll() {
    return super.getAll();
  }
}
​
и...
@RestController
@RequestMapping(AdminRestController.REST_URL)
public class AdminRestController extends AbstractUserController {
  static final String REST_URL = "/rest/admin/users";
​
  @Override
  @GetMapping(produces = MediaType.APPLICATION_JSON_VALUE)
  public List<User> getAll() {
    return super.getAll();
  }
1 Comment Collapse
Почему через SoapUI GET /topjava/rest/admin/users мне прилетает JSON, а через GET /topjava/ajax/admin/users возвращается HTML? (Почувствовал себя обезьяной, пилящей атомную бомбу)



Few [11:06 AM] 
@Ivanushka из за spring security


Ivanushka [11:08 AM] 
@Few Спасибо, посмотрю. Но и там и там в Soap настраивал Authentication


Few [11:12 AM] 
@Ivanushka <http pattern="/rest/**" use-expressions="true" name="restSecurityFilterChain" create-session="stateless">
       <http-basic/>
       <intercept-url pattern="/rest/admin/**" access="hasRole('ROLE_ADMIN')"/>
       <intercept-url pattern="/**" access="isAuthenticated()"/>
       <csrf disabled="true"/>
   </http>


[11:12] 
вот из-за этого

[11:12] 
для ajax таких настроек нет

[11:13] 
возвращает тебе html страницы логина т.к. ты не авторизован


Ivanushka [11:20 AM] 
@Few Спасибо ещё раз, точно. :+1:


Katherine Buzatu [2:42 PM] 
Товарищи, у нас появился `UserTo`. Помнится, когда мы делали разделение приложения на слои, была речь о том, что про ТО знает только слой веб. Новоиспеченный же `UserTo` оказывается у нас не только в сервисе, но еще и разбросан между сервисом и контроллером (update/save). Почему `UserTo` не оставили только в контроллере, реализовав слоями ниже обновление отдельных полей (типа нынешнего `enable()`)?

anpotashev [2:57 PM] 
"ТО знает только слой веб" - мне кажется неправильное высказывание. TO скорее используется для передачи данных м/ду слоями приложения и/или во вне.
"Почему не использовать отдельные параметры" - теряется гибкость: 
Допустим надо добавить/изменить/удалить поле в ТО. В случае с параметрами придется переписывать все функции на всех слоях. А в случае с ТО - максимум только в начальной и конечной точках.


Katherine Buzatu [3:07 PM] 
Ну, или тогда преобразовывать все в сервисе. Вот конкретно этот кусок мне не нравится:
```if (userTo.isNew()) {
            super.create(UserUtil.createNewFromTo(userTo));
        } else {
            super.update(userTo, userTo.getId());
        }```


anpotashev [3:17 PM] 
Тут согласен. Красивее вынести в сервис. Имхо, разумеется.


Katherine Buzatu [3:22 PM] 
Еще кажется избыточным параметр `id` в `update(UserTo userTo, int id)`. Если раньше мы его получали отдельно из `PathVariable` и проверяли соответствие, то сейчас они априори равны, т. к. мы уже подаем `id=userTo.getId()`.


anpotashev [3:30 PM] 
Тут могу только предположить, что в REST также будет изменено на DTO


anpotashev [3:35 PM] 
А кто-нибудь сделал без костылей так чтобы в окне редактирования еды нормально отображалась дата-время? (edited)


Serge [6:32 PM] 
uploaded and commented on this image: 2018-01-11 в 19.27.45.jpg
1 Comment
Ребят, кто поборол DateTimePicker… Не могу понять его волшебную логику. При обновлении ДАТУ и ЧАСЫ считывает с поля, а МИНУТЫ ставит текущего времени
Кто как округлял эти минуты?



Anel [6:53 PM] 
Кто-нибудь может ткнуть пальцем, откуда у нас появляется topjava в url? У меня все упорно работает по ссылкам вида: http://localhost:8080/rest/admin/users  без /topjava/


Katherine Buzatu [8:34 PM] 
uploaded and commented on this image: image
1 Comment
@Anel



Anel [8:40 PM] 
@Katherine Buzatu :+1: спасибо!


Andrew [8:53 PM] 
После устновки патчей у меня не запускается, падает с NoSuchBeanDefinitionException: No bean named 'userService' available. Так должно быть?

Dmitry Makarov [18 hours ago] 
у меня работает


Anel [9:01 PM] 
uploaded and commented on this image: message.png
1 Comment
И еще, кто-то может объяснить, что значит сообщение:



dart_rabbit [9:07 PM] 
@Anel Открой свойства проекта, фасет спринга


Anel [9:11 PM] 
uploaded and commented on this image: message2.png
1 Comment
@dart_rabbit



Andrew [9:17 PM] 
Это было, помогло клин-пекедж


Anel [9:29 PM] 
@Andrew а поподробнее?


Andrew [9:29 PM] 
Maven-Clean, Maven-Package


[9:30] 
Видимо, что-то где-то подвисло


Anel [9:34 PM] 
Не помогает ( на самом деле, такая же проблема в проекте, в котором, по факту, только эти 5 конфигурационных файлов спринг + pom + web.xml

Andrew [17 hours ago] 
Контекст подключен? И клин не помог?


Anel [17 hours ago] 
Клин/пекедж никакого эффекта не дает. Аналогичная ситуация на топджаве. так приложение без проблем работат. все контексты поднимаются


Andrew [16 hours ago] 
Это я так понимаю, после всех патчей и без изменений HW9? userService бин декларируется в security.xml. Может, где-то объявлен бин уже с таким именем?


Anel [16 hours ago] 
нет, это в пустом проекте, без userService бина


Andrew [16 hours ago] 
А, так в чём проблема тогда?


Anel [16 hours ago] 
понять хочу, что это такое


Andrew [10:01 PM] 
Это нормально, что у User есть кнопка Users, которая при нажатии кидает алерт с еррором?


Viktor [10:21 PM] 
А ктонибудь пытался напрямую обращаться по адресам localhost:8080/ajax/admin/users и прочим ajax?  С ними что-то не то и я не понимаю почему. Или я что-то делаю не так
Пробую обратиться по указанному выше в браузере все норм, даже в дебаг попадаю. Пробую тоже самое через постмана или SoapUI возвращает стартовую страницу авторизации, не 401 код а именно всю страницу с авторизацией (edited)


Viktor [10:21 PM] 
uploaded this image: Из браузера
1 Comment



Viktor [10:21 PM] 
uploaded this image: Из постмана
Add Comment



Viktor [10:22 PM] 
added this Plain Text snippet: Заголовки запроса из браузера
GET /ajax/admin/users HTTP/1.1
Host: localhost:8080
Connection: keep-alive
Cache-Control: max-age=0
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.132 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8
Accept-Encoding: gzip, deflate, br
Accept-Language: ru,en-US;q=0.9,en;q=0.8
Cookie: JSESSIONID=BEDABCE11E37467ADFE7C60195494142
Add Comment Collapse



Viktor [10:23 PM] 
added this Plain Text snippet: заголовки из постмана
GET /ajax/admin/users HTTP/1.1
Host: localhost:8080
Authorization: Basic YWRtaW5AZ21haWwuY29tOmFkbWlu
Cache-Control: no-cache
Postman-Token: 903e0f06-f90e-4209-00e0-94a9e1db50a7
Add Comment Collapse



Viktor [10:24 PM] 
uploaded this image: Левый запрос
Add Comment



Viktor [10:25 PM] 
Самое забавное, что через постмана можно обратиться к любому адресу и любым запросом и он возвращает главную страницу. Через браузер такое не прокатывает.


[10:25] 
Мне непонятно, что за фигня происходит :smiley: (edited)

Andrew [10:37 PM] 
Там же в хедерах надо креденшлы передавать, у нас вроде выключены сессии для реста


[10:40] 
В MailTo LocalDateTime должно быть поле? Или магия не может и надо стрингом принимать дату? Не могу заставить магию преобразовывать

Viktor [10:40 PM] 
повесь над полем аннаотацию форматтера


Andrew [10:41 PM] 
Пробовал, но видимо ему надо и велью указать


Viktor [10:43 PM] 
"я тебе вылью". Иногда лучше использовать русские слова, либо английские писать английскими буквами=)


Dmitry Makarov [10:54 PM] 
Viktor, ты о какой аннотации говоришь?

Andrew [16 hours ago] 
@DateTimeFormat


Viktor [10:54 PM] 
@Andrew спасибо, поставил в настройках создание сессии и через /rest смог все таки дотянуться до /ajax


[10:55] 
@Dmitry Makarov
   @DateTimeFormat(iso = DateTimeFormat.ISO.DATE_TIME)



Katherine Buzatu [10:55 PM] 
commented on Viktor’s file Из браузера
Недавно обсуждался смысл ТО. Вот, пожалуйста, слились все пользовательские пароли.




Viktor [10:56 PM] 
ну так-то они все равно должны быть закодированны :smiley:



----- Today January 12th, 2018 -----
Andrew [12:43 AM] 
datetimepicker: подключить зависимость достаточно или надо ещё и скрипты с ЦСС добавлять? У меня пустые рамки появляются..

anpotashev [14 hours ago] 
css добавил?
```<link rel="stylesheet" href="webjars/datetimepicker/2.5.11/jquery.datetimepicker.css">```


Andrew [13 hours ago] 
Уже настроил.. Но видимо надо специальный формат даты отправлять, чтобы читался спрингом..


Andrew [13 hours ago] 
Пока не нашёл нужный


Andrew [13 hours ago] 
Мне по фильтр приходят все нуллы


anpotashev [13 hours ago] 
формат можно задать в аннотации над полем.


Katherine Buzatu [2:25 PM] 
Измучили меня уже эти датаТаймы. В ISO - из ISO... Мне кажется, что надо конвертировать в ISO на клиенте, и отдавать на сервер уже в ISO. От ДатаПикера приходит датаТайм с пробелом. Обойти это на js вышло, но грубо как-то, некрасиво. Разверните, пожалуйста, в нужном направлении движения.


Ruslan Pivovarov [1 day ago] 
https://xdsoft.net/jqplugins/datetimepicker/   $("#datetime").datetimepicker({
       format:'Y-m-d H:i'
   }); Такое не подойдет.
xdsoft.net
DateTimePicker
DateTimePicker Best Period Picker search &text=&via=xdsoft_net arget= _blank title= Tweet >


Katherine Buzatu [1 day ago] 
Пойдет, но мы-то на сервере ISO ждем, с Т.


Ruslan Pivovarov [1 day ago] 
@DateTimeFormat(pattern = "yyyy-MM-ddTHH:mm") а такое? Или это не то?


Katherine Buzatu [1 day ago] 
Вот как раз об этом. Мы ждем с Т, а ДатаПикер отдает с пробелом.


Ruslan Pivovarov [1 day ago] 
@DateTimeFormat(pattern = "yyyy-MM-dd HH:mm") извеняюсь принимать такое в контроллере.


Ruslan Pivovarov [1 day ago] 
Без Т.

Anton K. [1 day ago] 
format:'Y-m-d\\TH:i'


grigory.kislin [1 day ago] 
сам мучался:) в результате 4 решения было
1. format:'Y-m-d\\TH:i'
2. преобразование на клиенте вручную
3. json view (или to) с нужным форматом для UI
4. jquery converters


Kaa [23 hours ago] 
еще вариант - eonasdan-bootstrap-datetimepicker и datetime-local тип поля вообще можно сказать из коробки работают.


Nick [7:33 PM] 
uploaded and commented on this image: Screenshotstyle.png
1 Comment
Доброе время суток! Вернулся на master и почему то вдруг перестали грузиться стили. Покопался, не смог найти. Буду благодарен за помощь.



Viktor [7:34 PM] 
судя по скриншоту их и правда нет :smiley:



Nick [7:42 PM] 
Ну да, да , вопрос неправильно поставил. В чем может быть причина?


Katherine Buzatu [7:45 PM] 
@Nick _Не претендую на истину_ Помнишь, мы тест такой писали - на доступность стилей. Я бы 1. посмотрела, проходит он или нет. 2. Посмотрела бы, что изменилось в том месте с тех пор, как тест проходил. 3 - по результатам 1 и 2.


Viktor [7:55 PM] 
Когд просишь помочь, надо выложить максимум доступной тебе информации. 
Через F12 ты можешь посмотреть грузяться ли стили, если да то с какой ошибкой.
В Idea ты можешь посмотреть логи и увидеть как сервер реагировал на запрос и какую ошибку выдал, если выдал.


[7:56] 
Без этих данных могу сказать только одно, стили не грузяться, потому что не грузяться :smiley:



Nick [8:06 PM] 
uploaded and commented on this image: XRf2G_croper_ru.png
2 Comments
Стили он видит, но не грузит.



Nick [8:06 PM] 
uploaded this image: VzOPl_croper_ru.png
Add Comment



Katherine Buzatu [8:09 PM] 
commented on Nick’s file XRf2G_croper_ru.png
Bootstrap стили где?

Katherine Buzatu [8:12 PM] 
Вернулся на master... Может, maven clean?


Nick [8:14 PM] 
Делал. Проблема все таки в bootstarp стилях. Сейчас попробую решить.


Nick [8:34 PM] 
Хм, вроде все проверил: в pom все есть, idea тоже видит "Mapped URL path [/webjars/**] onto handler 'org.springframework.web.servlet.resource.ResourceHttpRequestHandler#1'"


Viktor [8:37 PM] 
Ник запросы смотри, у тебя на клиента не отправляются файлы, опять всю нужную информацию прячешь


[8:37] 
вкладка network



[8:38] 
логи томаката в idea внизу, такое окошечко, там ещё слов много написано и они продолжают появляться иногда


Nick [8:51 PM] 
uploaded and commented on this image: vWzkN_croper_ru.png
1 Comment
Да, действительно, файлов bootstrap нет



Viktor [8:53 PM] 
теперь перейди во вкладку console и посмотри почему нет


Nick [9:02 PM] 
uploaded and commented on this image: DdH60_croper_ru.png
1 Comment
Только на JS ругается



Viktor [9:08 PM] 
тогда смотри логи томката


Nick [9:29 PM] 
added and commented on this Plain Text snippet: Output tomcat
12-Jan-2018 22:27:13.642 WARNING [main] org.apache.catalina.core.AprLifecycleListener.init The APR based Apache Tomcat Native library failed to load. The error reported was [C:\Users\Sikonder\Downloads\apache-tomcat-8.5.24\bin\tcnative-1.dll: Can't load AMD 64-bit .dll on a IA 32-bit platform]
 java.lang.UnsatisfiedLinkError: C:\Users\Sikonder\Downloads\apache-tomcat-8.5.24\bin\tcnative-1.dll: Can't load AMD 64-bit .dll on a IA 32-bit platform
	at java.lang.ClassLoader$NativeLibrary.load(Native Method)
	at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1941)
	at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1857)
	at java.lang.Runtime.loadLibrary0(Runtime.java:870)
	at java.lang.System.loadLibrary(System.java:1122)
	at org.apache.tomcat.jni.Library.<init>(Library.java:42)
	at org.apache.tomcat.jni.Library.initialize(Library.java:178)
	at org.apache.catalina.core.AprLifecycleListener.init(AprLifecycleListener.java:198)
	at org.apache.catalina.core.AprLifecycleListener.isAprAvailable(AprLifecycleListener.java:107)
	at org.apache.catalina.connector.Connector.setProtocol(Connector.java:582)
	at org.apache.catalina.connector.Connector.<init>(Connector.java:74)
	at org.apache.catalina.startup.ConnectorCreateRule.begin(ConnectorCreateRule.java:64)
	at org.apache.tomcat.util.digester.Digester.startElement(Digester.java:1250)
	at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:509)
	at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(AbstractXMLDocumentParser.java:182)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1339)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2784)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:602)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:505)
	at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:841)
	at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:770)
	at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)
	at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1213)
	at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:643)
	at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1518)
	at org.apache.catalina.startup.Catalina.load(Catalina.java:593)
	at org.apache.catalina.startup.Catalina.load(Catalina.java:644)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:309)
	at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:492)

12-Jan-2018 22:27:13.741 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server version:        Apache Tomcat/8.5.24
12-Jan-2018 22:27:13.741 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server built:          Nov 27 2017 13:05:30 UTC
12-Jan-2018 22:27:13.741 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server number:         8.5.24.0
12-Jan-2018 22:27:13.741 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Name:               Windows 7
12-Jan-2018 22:27:13.742 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Version:            6.1
12-Jan-2018 22:27:13.742 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Architecture:          x86
12-Jan-2018 22:27:13.742 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Java Home:             C:\Program Files (x86)\Java\jdk1.8.0_144\jre
12-Jan-2018 22:27:13.742 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Version:           1.8.0_144-b01
12-Jan-2018 22:27:13.742 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Vendor:            Oracle Corporation
12-Jan-2018 22:27:13.742 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_BASE:         C:\Users\Sikonder\.IntelliJIdea2017.3\system\tomcat\Unnamed_topjava_2
12-Jan-2018 22:27:13.742 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_HOME:         C:\Users\Sikonder\Downloads\apache-tomcat-8.5.24
12-Jan-2018 22:27:13.743 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.util.logging.config.file=C:\Users\Sikonder\.IntelliJIdea2017.3\system\tomcat\Unnamed_topjava_2\conf\logging.properties
12-Jan-2018 22:27:13.743 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager
12-Jan-2018 22:27:13.743 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote=
12-Jan-2018 22:27:13.743 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote.port=1099
12-Jan-2018 22:27:13.743 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote.ssl=false
12-Jan-2018 22:27:13.743 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote.authenticate=false
12-Jan-2018 22:27:13.744 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.rmi.server.hostname=127.0.0.1
12-Jan-2018 22:27:13.744 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djdk.tls.ephemeralDHKeySize=2048
12-Jan-2018 22:27:13.744 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.protocol.handler.pkgs=org.apache.catalina.webresources
12-Jan-2018 22:27:13.744 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dignore.endorsed.dirs=
12-Jan-2018 22:27:13.744 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcatalina.base=C:\Users\Sikonder\.IntelliJIdea2017.3\system\tomcat\Unnamed_topjava_2
12-Jan-2018 22:27:13.744 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcatalina.home=C:\Users\Sikonder\Downloads\apache-tomcat-8.5.24
12-Jan-2018 22:27:13.744 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.io.tmpdir=C:\Users\Sikonder\Downloads\apache-tomcat-8.5.24\temp
12-Jan-2018 22:27:13.909 INFO [main] org.apache.coyote.AbstractProtocol.init Initializing ProtocolHandler ["http-nio-8080"]
12-Jan-2018 22:27:13.930 INFO [main] org.apache.tomcat.util.net.NioSelectorPool.getSharedSelector Using a shared selector for servlet write/read
12-Jan-2018 22:27:13.941 INFO [main] org.apache.coyote.AbstractProtocol.init Initializing ProtocolHandler ["ajp-nio-8009"]
12-Jan-2018 22:27:13.944 INFO [main] org.apache.tomcat.util.net.NioSelectorPool.getSharedSelector Using a shared selector for servlet write/read
12-Jan-2018 22:27:13.944 INFO [main] org.apache.catalina.startup.Catalina.load Initialization processed in 504 ms
12-Jan-2018 22:27:13.974 INFO [main] org.apache.catalina.core.StandardService.startInternal Starting service [Catalina]
12-Jan-2018 22:27:13.974 INFO [main] org.apache.catalina.core.StandardEngine.startInternal Starting Servlet Engine: Apache Tomcat/8.5.24
12-Jan-2018 22:27:13.984 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler ["http-nio-8080"]
12-Jan-2018 22:27:13.995 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler ["ajp-nio-8009"]
12-Jan-2018 22:27:13.998 INFO [main] org.apache.catalina.startup.Catalina.start Server startup in 53 ms
Connected to server
[2018-01-12 10:27:14,324] Artifact topjava:war: Artifact is being deployed, please wait...
12-Jan-2018 22:27:18.693 INFO [RMI TCP Connection(5)-127.0.0.1] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.
22:27:18.946 INFO  org.springframework.web.context.ContextLoader.initWebApplicationContext:270 - Root WebApplicationContext: initialization started
22:27:19.029 INFO  o.s.context.support.AbstractApplicationContext.prepareRefresh:589 - Refreshing Root WebApplicationContext: startup date [Fri Jan 12 22:27:19 MSK 2018]; root of context hierarchy
22:27:19.104 INFO  o.s.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions:316 - Loading XML bean definitions from class path resource [spring/spring-app.xml]
22:27:19.213 INFO  o.s.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions:316 - Loading XML bean definitions from class path resource [spring/spring-tools.xml]
22:27:19.232 INFO  o.s.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions:316 - Loading XML bean definitions from class path resource [spring/spring-security.xml]
22:27:19.282 INFO  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:75 - You are running with Spring Security Core 5.0.0.RELEASE
22:27:19.287 WARN  o.s.security.core.SpringSecurityCoreVersion.performVersionChecks:78 - **** You are advised to use Spring 5.0.2.RELEASE or later with this version. You are running: 5.0.1.RELEASE
22:27:19.288 INFO  o.s.security.config.SecurityNamespaceHandler.<init>:78 - Spring Security 'config' module version is 5.0.0.RELEASE
22:27:19.371 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'hasRole('ROLE_ADMIN')' for /rest/admin/**
22:27:19.372 INFO  o.s.s.c.h.FilterInvocationSecurityMetadataSourceParser.parseInterceptUrlsForFilterInvocationRequestMap:194 - Creating access control expression attribute 'isAuthenticated()' for /**
22:27:19.409 INFO  o.s.s.config.http.HttpSecurityBeanDefinitionParser.checkFilterChainOrder:307 - Checking sorted filter chain: [Root bean: class [org.springframework.security.web.context.SecurityContextPersistenceFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200, Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400, Root bean: class [org.springframework.security.web.header.HeaderWriterFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500, Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1600, Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 1800, Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2100, Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2300, <org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0>, order = 2400]
22:27:19.575 INFO  o.s.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions:316 - Loading XML bean definitions from class path resource [spring/spring-db.xml]
22:27:19.665 INFO  o.s.b.f.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions:139 - Skipped XML bean definition file due to specified profiles [hsqldb] not matching: class path resource [spring/spring-db.xml]
22:27:19.680 INFO  o.s.b.f.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions:139 - Skipped XML bean definition file due to specified profiles [tomcat] not matching: class path resource [spring/spring-db.xml]
22:27:19.681 INFO  o.s.b.f.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions:139 - Skipped XML bean definition file due to specified profiles [tomcat] not matching: class path resource [spring/spring-db.xml]
22:27:19.681 INFO  o.s.b.f.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions:139 - Skipped XML bean definition file due to specified profiles [jdbc] not matching: class path resource [spring/spring-db.xml]
22:27:19.687 INFO  o.s.b.f.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions:139 - Skipped XML bean definition file due to specified profiles [jpa] not matching: class path resource [spring/spring-db.xml]
22:27:20.581 INFO  o.s.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory:354 - Building JPA container EntityManagerFactory for persistence unit 'default'
22:27:20.605 INFO  org.hibernate.jpa.internal.util.LogHelper.logPersistenceUnitInformation:31 - HHH000204: Processing PersistenceUnitInfo [
	name: default
	...]
22:27:20.757 INFO  org.hibernate.Version.logVersion:45 - HHH000412: Hibernate Core {5.2.12.Final}
22:27:20.760 INFO  org.hibernate.cfg.Environment.<clinit>:213 - HHH000206: hibernate.properties not found
22:27:20.842 INFO  o.h.a.common.reflection.java.JavaReflectionManager.<clinit>:66 - HCANN000001: Hibernate Commons Annotations {5.0.1.Final}
22:27:21.481 INFO  org.hibernate.dialect.Dialect.<init>:157 - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL81Dialect
22:27:21.642 INFO  o.h.engine.jdbc.env.internal.LobCreatorBuilderImpl.useContextualLobCreation:124 - HHH000424: Disabling contextual LOB creation as createClob() method threw error : java.lang.reflect.InvocationTargetException
22:27:22.360 INFO  org.hibernate.validator.internal.util.Version.<clinit>:21 - HV000001: Hibernate Validator 6.0.5.Final
22:27:22.731 INFO  o.h.validator.internal.engine.ValidatorFactoryImpl.getTemporalValidationTolerance:575 - HV000238: Temporal validation tolerance set to 0.
22:27:23.345 INFO  o.h.hql.internal.QueryTranslatorFactoryInitiator.initiateService:47 - HHH000397: Using ASTQueryTranslatorFactory
22:27:23.491 INFO  o.s.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory:389 - Initialized JPA EntityManagerFactory for persistence unit 'default'
22:27:23.540 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/resources/**'], []
22:27:23.546 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/webjars/**'], []
22:27:23.935 DEBUG o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource.processMap:74 - Adding web access control expression 'hasRole('ROLE_ADMIN')', for Ant [pattern='/rest/admin/**']
22:27:23.939 DEBUG o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource.processMap:74 - Adding web access control expression 'isAuthenticated()', for org.springframework.security.web.util.matcher.AnyRequestMatcher@1
22:27:23.947 DEBUG o.s.s.access.intercept.AbstractSecurityInterceptor.afterPropertiesSet:180 - Validated configuration attributes
22:27:23.948 INFO  o.s.security.web.DefaultSecurityFilterChain.<init>:43 - Creating filter chain: Ant [pattern='/rest/**'], [org.springframework.security.web.context.SecurityContextPersistenceFilter@808c23, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@598692, org.springframework.security.web.header.HeaderWriterFilter@572fb0, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@a8271, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@17a5022, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@74fae3, org.springframework.security.web.access.ExceptionTranslationFilter@19c9516, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@15dbe1a]
12-Jan-2018 22:27:23.986 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deploying web application directory [C:\Users\Sikonder\Downloads\apache-tomcat-8.5.24\webapps\manager]
12-Jan-2018 22:27:24.061 INFO [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory [C:\Users\Sikonder\Downloads\apache-tomcat-8.5.24\webapps\manager] has finished in [75] ms
22:27:24.868 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/initDB.sql]
22:27:25.445 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/initDB.sql] in 577 ms.
22:27:25.445 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:442 - Executing SQL script from class path resource [db/populateDB.sql]
22:27:25.477 INFO  o.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript:508 - Executed SQL script from class path resource [db/populateDB.sql] in 32 ms.
22:27:25.583 INFO  org.springframework.web.context.ContextLoader.initWebApplicationContext:310 - Root WebApplicationContext: initialization completed in 6632 ms
22:27:25.630 INFO  org.springframework.web.servlet.FrameworkServlet.initServletBean:494 - FrameworkServlet 'mvc-dispatcher': initialization started
22:27:25.635 INFO  o.s.context.support.AbstractApplicationContext.prepareRefresh:589 - Refreshing WebApplicationContext for namespace 'mvc-dispatcher-servlet': startup date [Fri Jan 12 22:27:25 MSK 2018]; parent: Root WebApplicationContext
22:27:25.635 INFO  o.s.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions:316 - Loading XML bean definitions from class path resource [spring/spring-mvc.xml]
22:27:26.571 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/ajax/profile/meals/{id}],methods=[DELETE]}" onto public void ru.javawebinar.topjava.web.meal.MealAjaxController.delete(int)
22:27:26.575 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/ajax/profile/meals],methods=[GET],produces=[application/json]}" onto public java.util.List<ru.javawebinar.topjava.to.MealWithExceed> ru.javawebinar.topjava.web.meal.MealAjaxController.getAll()
22:27:26.576 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/ajax/profile/meals/filter],methods=[POST],produces=[application/json]}" onto public java.util.List<ru.javawebinar.topjava.to.MealWithExceed> ru.javawebinar.topjava.web.meal.MealAjaxController.getBetween(java.time.LocalDate,java.time.LocalTime,java.time.LocalDate,java.time.LocalTime)
22:27:26.576 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/ajax/profile/meals],methods=[POST]}" onto public void ru.javawebinar.topjava.web.meal.MealAjaxController.createOrUpdate(java.lang.Integer,java.time.LocalDateTime,java.lang.String,int)
22:27:26.589 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/rest/profile/meals/{id}],methods=[GET],produces=[application/json]}" onto public ru.javawebinar.topjava.model.Meal ru.javawebinar.topjava.web.meal.MealRestController.get(int)
22:27:26.589 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/rest/profile/meals/{id}],methods=[PUT],consumes=[application/json],produces=[application/json]}" onto public void ru.javawebinar.topjava.web.meal.MealRestController.update(ru.javawebinar.topjava.model.Meal,int)
22:27:26.591 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/rest/profile/meals/{id}],methods=[DELETE],produces=[application/json]}" onto public void ru.javawebinar.topjava.web.meal.MealRestController.delete(int)
22:27:26.592 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/rest/profile/meals],methods=[GET],produces=[application/json]}" onto public java.util.List<ru.javawebinar.topjava.to.MealWithExceed> ru.javawebinar.topjava.web.meal.MealRestController.getAll()
22:27:26.592 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/rest/profile/meals/filter],methods=[GET],produces=[application/json]}" onto public java.util.List<ru.javawebinar.topjava.to.MealWithExceed> ru.javawebinar.topjava.web.meal.MealRestController.getBetween(java.time.LocalDate,java.time.LocalTime,java.time.LocalDate,java.time.LocalTime)
22:27:26.593 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/rest/profile/meals],methods=[POST],consumes=[application/json],produces=[application/json]}" onto public org.springframework.http.ResponseEntity<ru.javawebinar.topjava.model.Meal> ru.javawebinar.topjava.web.meal.MealRestController.createWithLocation(ru.javawebinar.topjava.model.Meal)
22:27:26.597 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/],methods=[GET]}" onto public java.lang.String ru.javawebinar.topjava.web.RootController.root()
22:27:26.598 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/users],methods=[GET]}" onto public java.lang.String ru.javawebinar.topjava.web.RootController.users(org.springframework.ui.Model)
22:27:26.598 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/users],methods=[POST]}" onto public java.lang.String ru.javawebinar.topjava.web.RootController.setUser(javax.servlet.http.HttpServletRequest)
22:27:26.599 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/meals],methods=[GET]}" onto public java.lang.String ru.javawebinar.topjava.web.RootController.meals(org.springframework.ui.Model)
22:27:26.603 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/ajax/admin/users/{id}],methods=[DELETE]}" onto public void ru.javawebinar.topjava.web.user.AdminAjaxController.delete(int)
22:27:26.604 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/ajax/admin/users/{id}],methods=[POST]}" onto public void ru.javawebinar.topjava.web.user.AdminAjaxController.enable(int,boolean)
22:27:26.605 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/ajax/admin/users],methods=[GET],produces=[application/json]}" onto public java.util.List<ru.javawebinar.topjava.model.User> ru.javawebinar.topjava.web.user.AdminAjaxController.getAll()
22:27:26.605 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/ajax/admin/users],methods=[POST]}" onto public void ru.javawebinar.topjava.web.user.AdminAjaxController.createOrUpdate(java.lang.Integer,java.lang.String,java.lang.String,java.lang.String)
22:27:26.615 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/rest/admin/users/{id}],methods=[GET],produces=[application/json]}" onto public ru.javawebinar.topjava.model.User ru.javawebinar.topjava.web.user.AdminRestController.get(int)
22:27:26.616 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/rest/admin/users/{id}],methods=[PUT],consumes=[application/json]}" onto public void ru.javawebinar.topjava.web.user.AdminRestController.update(ru.javawebinar.topjava.model.User,int)
22:27:26.616 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/rest/admin/users/{id}],methods=[DELETE]}" onto public void ru.javawebinar.topjava.web.user.AdminRestController.delete(int)
22:27:26.617 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/rest/admin/users],methods=[GET],produces=[application/json]}" onto public java.util.List<ru.javawebinar.topjava.model.User> ru.javawebinar.topjava.web.user.AdminRestController.getAll()
22:27:26.618 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/rest/admin/users],methods=[POST],consumes=[application/json],produces=[application/json]}" onto public org.springframework.http.ResponseEntity<ru.javawebinar.topjava.model.User> ru.javawebinar.topjava.web.user.AdminRestController.createWithLocation(ru.javawebinar.topjava.model.User)
22:27:26.619 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/rest/admin/users/by],methods=[GET],produces=[application/json]}" onto public ru.javawebinar.topjava.model.User ru.javawebinar.topjava.web.user.AdminRestController.getByMail(java.lang.String)
22:27:26.622 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/rest/profile],methods=[GET],produces=[application/json]}" onto public ru.javawebinar.topjava.model.User ru.javawebinar.topjava.web.user.ProfileRestController.get()
22:27:26.623 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/rest/profile],methods=[PUT],consumes=[application/json]}" onto public void ru.javawebinar.topjava.web.user.ProfileRestController.update(ru.javawebinar.topjava.model.User)
22:27:26.624 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/rest/profile],methods=[DELETE]}" onto public void ru.javawebinar.topjava.web.user.ProfileRestController.delete()
22:27:26.625 INFO  o.s.w.s.h.AbstractHandlerMethodMapping$MappingRegistry.register:549 - Mapped "{[/rest/profile/text],methods=[GET]}" onto public java.lang.String ru.javawebinar.topjava.web.user.ProfileRestController.testUTF()
22:27:26.656 INFO  o.h.validator.internal.engine.ValidatorFactoryImpl.getTemporalValidationTolerance:575 - HV000238: Temporal validation tolerance set to 0.
22:27:26.849 INFO  o.s.w.s.m.m.a.RequestMappingHandlerAdapter.initControllerAdviceCache:568 - Looking for @ControllerAdvice: WebApplicationContext for namespace 'mvc-dispatcher-servlet': startup date [Fri Jan 12 22:27:25 MSK 2018]; parent: Root WebApplicationContext
22:27:26.950 INFO  o.s.w.s.m.m.a.RequestMappingHandlerAdapter.initControllerAdviceCache:568 - Looking for @ControllerAdvice: WebApplicationContext for namespace 'mvc-dispatcher-servlet': startup date [Fri Jan 12 22:27:25 MSK 2018]; parent: Root WebApplicationContext
22:27:26.983 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache:272 - Looking for exception mappings: WebApplicationContext for namespace 'mvc-dispatcher-servlet': startup date [Fri Jan 12 22:27:25 MSK 2018]; parent: Root WebApplicationContext
22:27:27.086 INFO  o.s.web.servlet.handler.AbstractUrlHandlerMapping.registerHandler:373 - Mapped URL path [/resources/**] onto handler 'org.springframework.web.servlet.resource.ResourceHttpRequestHandler#0'
22:27:27.090 INFO  o.s.web.servlet.handler.AbstractUrlHandlerMapping.registerHandler:373 - Mapped URL path [/webjars/**] onto handler 'org.springframework.web.servlet.resource.ResourceHttpRequestHandler#1'
22:27:27.202 INFO  org.springframework.web.servlet.FrameworkServlet.initServletBean:513 - FrameworkServlet 'mvc-dispatcher': initialization completed in 1572 ms
[2018-01-12 10:27:27,214] Artifact topjava:war: Artifact is deployed successfully
[2018-01-12 10:27:27,214] Artifact topjava:war: Deploy took 12 890 milliseconds
22:27:27.426 DEBUG o.s.s.web.util.matcher.AntPathRequestMatcher.matches:157 - Checking match of request : '/'; against '/resources/**'
22:27:27.427 DEBUG o.s.s.web.util.matcher.AntPathRequestMatcher.matches:157 - Checking match of request : '/'; against '/webjars/**'
22:27:27.428 DEBUG o.s.s.web.util.matcher.AntPathRequestMatcher.matches:157 - Checking match of request : '/'; against '/rest/**'
22:27:27.430 DEBUG org.springframework.security.web.FilterChainProxy.doFilterInternal:202 - / has no matching filters
22:27:28.966 DEBUG o.s.s.web.util.matcher.AntPathRequestMatcher.matches:157 - Checking match of request : '/'; against '/resources/**'
22:27:28.967 DEBUG o.s.s.web.util.matcher.AntPathRequestMatcher.matches:157 - Checking match of request : '/'; against '/webjars/**'
22:27:28.967 DEBUG o.s.s.web.util.matcher.AntPathRequestMatcher.matches:157 - Checking match of request : '/'; against '/rest/**'
22:27:28.967 DEBUG org.springframework.security.web.FilterChainProxy.doFilterInternal:202 - / has no matching filters
22:27:28.994 DEBUG o.s.s.web.util.matcher.AntPathRequestMatcher.matches:157 - Checking match of request : '/resources/css/style.css'; against '/resources/**'
22:27:28.995 DEBUG org.springframework.security.web.FilterChainProxy.doFilterInternal:202 - /resources/css/style.css has an empty filter list
22:27:52.994 DEBUG o.s.s.web.util.matcher.AntPathRequestMatcher.matches:157 - Checking match of request : '/resources/css/style.css'; against '/resources/**'
22:27:52.995 DEBUG org.springframework.security.web.FilterChainProxy.doFilterInternal:202 - /resources/css/style.css has an empty filter list

Nick Yesterday at 9:29 PM  

Наверное, пропали эти стили в бермудском треугольнике.
Katherine Buzatu Yesterday at 9:47 PM  

...и, похоже, jQuery захватили.


Nick [9:49 PM] 
Фух, проблема решена. Всем спасибо:+1:. Причина была в том, что в headTag.jsp не были прописаны линки)



----- Today January 13th, 2018 -----
Антон Кляшторный [1:54 PM] 
RootController.meals(), его нужно тоже поправить. что поправлять, подскажите мысль


Viktor [1:55 PM] 
meals таблицу переделал на ajax?


Антон Кляшторный [1:58 PM] 
переделал, добавляет, обновляет и раскрашивает


Few [2:11 PM] 
@Антон Кляшторный 9_06_datatables_via_ajax пересмотри с самого начала там почти


Антон Кляшторный [2:15 PM] 
Спасибо, пойду поправлять. С Наступающим СНГ! (edited)


Антон Кляшторный [3:22 PM] 
@Viktor @Few Если правильно понял ваши подсказки то в root контроллере meals получаю List<Meal>,  остальное делает ajax


Viktor [3:23 PM] 
@Антон Кляшторный а зачем тебе List<Meal>?


Антон Кляшторный [3:29 PM] 
действительно, всего строки из 6-ти символов хватает :slightly_smiling_face:


Viktor [3:35 PM] 
:smiley:
