grigory.kislin [1:19 AM] 
joined #graduate_project.


grigory.kislin [1:37 AM] 
Общение по выпускному проекту https://github.com/JavaWebinar/topjava/blob/doc/doc/graduation.md
Особое внимание на замечания по нему!
Начинайте делать в проекте темы, которые мы уже прошли, уже сейчас
GitHub
JavaWebinar/topjava
Contribute to topjava development by creating an account on GitHub.
 


Argentum_kuh [1:54 AM] 
joined #graduate_project along with 18 others.


grigory.kislin [5:29 PM] 
Привет!
по выпускному: задание дано как есть, но делать в нем надо только то, что уже прошли
например объектную модель, слой сервиса, слой контроллера пока без ввода данных снаружи (edited)


MetalBro [6:22 PM] 
Кто-нибудь начал смотреть? Думаете, функции админа только в выставлении меню по ресторанам, или функция выбора места для обеда у него тоже должна быть?


Few
[6:23 PM] 
из текста кажется что это разные пользователи


[6:23] 
т.е. админская учетка отдельно только для администрирования


anpotashev [6:55 PM] 
Думаю, для выбора места ему надо еще роль юзера добавить. если же у него только одна роль админа, то и голосовать он не должен (edited)


Katherine Buzatu [7:06 PM] 
Нам сказано, что юзеров очень много, а админов очень мало, и что усложнять не надо. Думаю, админы подвинутся и заведут отдельную учетку для голосования.


anpotashev [7:12 PM] 
Или несколько и будут продвигать нужные рестораны


Ivanushka [12:25 PM] 
Добрый день, начал копать проект, каждую строчку стараюсь вставить осознанно, застрял на том, что во вкладке Persistence (IDEA) есть мой проект, но, в отличии от TopJava, не могу туда добавить dataSource т.к. нет SessionFactory...

anpotashev [4 hours ago] 
И тебе добрый. У тебя в project structure -> modules или -> facets что есть? JPA или Hibernate?
И там же в группе spring проверь, что подтянута конфигурация.


grigory.kislin [1:00 PM] 
@Ivanushka (выбрать нужный как головоломка:)
Assign Data Source можно делать на датасорсы, которые у тебя есть в вкладке Database

Ivanushka [2 hours ago] 
Решил головоломку.:stuck_out_tongue_winking_eye:


Ivanushka [1:10 PM] 
Спасибо. Работает. Решил буквально только что - пересмотром видео (4_5_orm_jpa)


MetalBro [2:51 PM] 
Мы же Spring Data JPA будем разбирать? Его нельзя использовать?


[2:51] 
в этом проекте


Yuri [4:53 PM] 
Печально, что на выпускной проект надо использовать Hibernate, а не Spring Data JPA


Yuri [4:58 PM] 
Или можно?
16: Предпочтительно использовать DATA-JPA (можно без лишней делегации, напрямую из сервиса/контроллера дергать Repository). В случае JPA позаботьтесь о своем собственном generic DAO.


Andrey [5:56 PM] 
Юра, это сам спросил и сам ответил?)))
Бывает.
Эх.. я иногда по 2 часа обдумываю как метод назвать...:grinning:
Yuri D. Beljaeff
Или можно?
16: Предпочтительно использовать DATA-JPA (можно без лишней делегации, напрямую из сервиса/контроллера дергать Repository). В случае JPA позаботьтесь о своем собственном generic DAO.
Posted in #graduate_projectToday at 4:58 PM


grigory.kislin [8:50 PM] 
> Мы же Spring Data JPA будем разбирать
@MetalBro @Yuri
https://github.com/JavaWebinar/topjava, урок 5
> надо использовать Hibernate, а не Spring Data JPA
https://github.com/JavaWebinar/topjava/blob/doc/doc/lesson04.md - см вопрос у рооке 4. большая путаница в голове
> Чистого JPA не существует, т.е. это всего лишь интерфейс, спецификация? Говорим JPA, подразумеваем какой-то ORM фрэймворк? А что тогда используют чистый jdbc, Spring-jdbc, MyBatis? MyBatis не реализует JPA?
ORM это технология связывания БД и объектов приложения, а JPA - это JavaEE спецификация (API) этой технологии. Реализации JPA - Hibernate, OpenJPA, EclipceLink, но, например, Hibernate может работать по собственному API (без JPA, которая появиласть позже). Spring-JDBC, MyBatis, JDBI не реализуют JPA, это обертки к JDBC. Все ORM и JPA также реализованы поверх JDBC.
GitHub
JavaWebinar/topjava
Contribute to topjava development by creating an account on GitHub.
 


Yuri [9:34 PM] 
Андрей, да нет, не то что бы ответил, скорее непонятно мне))

Yuri [9:50 PM] 
Григорий, я наверно не очень вразумительно выразился. Я понимаю, что hibernate это абстракция над Jdbc, что jpa это интерфейс для привнесения стандарта... 
Просто в формулировке задания было указано hibernate, а прочитав п.16 у меня по ассоциации проскочило в голове "spring Data jpa":) Вот поэтому и задал вопрос такой!


Yuri [10:35 PM] 
Просто понравилось, пишешь интерфейсы и все, очень лаконично:)


anpotashev [2:03 PM] 
Друзья, вот такой вопрос по голосованию: т.к. дата голосования берется системная, то тесты теоретически могут свалиться, если проводить их в районе полуночи.
Как думаете, понять и простить?

Katherine Buzatu [7 hours ago] 
Ну, тут вообще с датой и временем запутанно. Они выбирают ресторан на ланч - т. е. первая половина дня.  Вопрос, когда поступает меню, и когда начинается и когда заканчивается голосование.


anpotashev [7 hours ago] 
Ну это то как рез легко решается в тестах


Katherine Buzatu [7 hours ago] 
а может, дата и время вообще не понадобятся...


Few [2:04 PM] 
Наверное да :slightly_smiling_face:


vsimonov [2:11 PM] 
а как создать два FOREIGN_key к двум разным таблицам в postgres? в две строки ругается


anpotashev [2:13 PM] 
а как у тебя сейчас?


[2:13] 
FOREIGN KEY (dish_id) REFERENCES dish (id) ON DELETE CASCADE
 ,  FOREIGN KEY (restaurant_id) REFERENCES restaurant (id) ON DELETE CASCADE


[2:14] 
У меня так примерно

vsimonov [3:25 PM] 
а капец запятую забыл) (edited)


russell [7:06 PM] 
Скажите, а нужно давать админу устанавливать дату или если меню публикуют каждый день, устанавливать текущую дату автоматически?


anpotashev [7:45 PM] 
Пока не добрался, но думаю первое. Меню на завтра могут заполнять заранее.


russell [7:47 PM] 
спасибо, так и сделаю, админ все таки


MetalBro [5:06 AM] 
После 5 урока останется только дождаться разбора Security для выполнения проекта? Вроде по описанию проекта остальное уже все прошли. Или я ошибаюсь?


[5:09] 
фронтенд не надо, т.е. в методах сервлета, контроллера будут только импровизированные внешние запросы.


Andrey [9:57 AM] 
Я один не успел сделать Graduation-project или есть ещё?



Few [9:58 AM] 
этот проект нам до самого выпуска, еще на 8 недель


[9:58] 
что значит ты не успел? :slightly_smiling_face:


Andrey [11:48 AM] 
Вопрос, а нужна ли там вообще дата?
Ruslan Shakirov
Скажите, а нужно давать админу устанавливать дату или если меню публикуют каждый день, устанавливать текущую дату автоматически?
Thread in #graduate_projectYesterday at 7:06 PM

anpotashev [7 hours ago] 
Дату, имхо, надо делать обязательно: "Нужно сделать все максимально просто, удобно для доработок". В качестве потенциальных доработок предполагаю будет статистика. В коде ее реализовывать не надо, а вот в б.д. - да.


russell [11:51 AM] 
@Andrey Григорий пишет: Историю еды и голосований лучше сделать. Если история еды есть, то и дата скорей всего нужна.


Dmitry Neustupov [12:17 PM] 
@Andrey я ещё даже не начинал (


Andrey [12:23 PM] 
ыч)
Dmitry Neustupov
@Andrey я ещё даже не начинал (
Posted in #graduate_projectToday at 12:17 PM


anpotashev [12:25 PM] 
Дату, имхо, надо делать обязательно: "Нужно сделать все максимально просто, удобно для доработок". В качестве потенциальных доработок предполагаю будет статистика. В коде ее реализовывать не надо, а вот в б.д. - да.



russell [12:26 PM] 
@anpotashev так меню надо вводить содержащий список еды, или все в еде указывать и дату и рестор?


anpotashev [12:29 PM] 
@russell Кто как реализует. У меня такой сущности как меню вообще нет.


Ivanushka 
[12:35 PM] 
@anpotashev +1, ресторан и еда с датой? Но тут есть нюансы...


Andrey [12:36 PM] 
Дима, у всех графики разные, тут у кого как выходит.
Andrey O.
ыч)
Posted in #graduate_projectToday at 12:23 PM

vsimonov [12:41 PM] 
а какая может нужна статистика? по рейтингу если тока в порядке сортировки, или прям в какой день сколько голосов было отдано такомуто ресторану?


anpotashev [12:47 PM] 
@vsimonov Например, по блюдам. При наличии блюда А в меню при цене до XX больше народу голосует за обед вне зависимости в каком она ресторане


russell [12:47 PM] 
@anpotashev а как ты голос привязываешь сразу ко всем блюдам?


anpotashev [12:48 PM] 
Я - к ресторану


russell [12:48 PM] 
а у тебя на каждую дату свой ресторан идет?


anpotashev [12:48 PM] 
Зачем?


russell [12:48 PM] 
а все уловил


anpotashev [7:49 PM] 
Привет!
Почему-то не работает валидация на уровне модели.
Мы вроде в topjava специально ее нигде не включали, только добавили аннотации к полям модели и hibernate-validator в pom.xml


[7:49] 
Или еще что-то было сделано?


grigory.kislin [8:47 PM] 
@anpotashev hibernate-validator при сохранение в базу через hibernate делает валидацию (edited)


anpotashev [8:47 PM] 
Спасибо. Только что разобрался. javax.el забыл включить в зависимости.


anpotashev [11:18 PM] 
Друзья, еще один вопрос. По кэшу.
Есть метод с кэшем: 
@Cacheable("menu")
   public DayMenu getDayMenu(LocalDate date) {
...
и есть второй метод в этом же классе:
   public DayMenu getDayMenu() {
       LocalDate date = LocalDate.now();
       return getDayMenu(date);
   }
Почему при вызове первого метода из второго не срабатывает кэш, а идет обращение к бд? (edited)


[11:21] 
Или это компилятор так оптимизирует


grigory.kislin [11:14 AM] 
@anpotashev хорошо, что споткнулся:) как работает @Cacheable? (edited)



anpotashev [12:04 PM] 
understood. 10x


	
Антон Кляшторный 12:02 PM
https://www.myvote.io/restaurant_demo
MyVote.IO
Restaurant Ratings (35 kB)


Дима Жуков 12:03 PM
Написал уже?)


Антон Кляшторный 12:03 PM
powerred by myvote.io


12:04
изучаю конкурентов


Дима Жуков 12:04 PM
:slightly_smiling_face:


vch 12:06 PM
кто-то сумел монетизировать выпускной проект?


Антон Кляшторный 12:07 PM
Григорий из нас походу только :slightly_smiling_face:


vch 12:08 PM
а вдруг myvote.io тоже из наших


grigory.kislin 1:01 PM
участникак с контактом  support@myvote.io у меня нет:( (edited)


Vladimir 1:31 PM
логично, ибо на курс регистрируются обычно под личным мейлом, а не под саппортом ), так что не факт


philip.goldm 9:32 PM
Тоже находил. Кому будет интересно http://lunchvote.org
lunchvote.org
lunch vote!
Vote on where to go for lunch with your co-workers. 


Ivanushka [10:14 AM] 
Поделитесь мыслями на счёт архитектуры проекта. На TopJava у нас 2 репозитория и 2 сервиса (User, Meal) сделано это, я так понимаю, в учебных целях, или нет? В нашем проекте хочу обойтись одним, или это не верно?


Viktor [10:32 AM] 
@Ivanushka обычно 1 репозиторий отвечает за 1 таблицу, а если более общим словом то 1 класс отвечает за 1 конкретное занятие "Принцип единой\единственной ответственности".


[10:35] 
Если вы ещё не знакомы с SOLID, это набор принципов объектно-ориентированного дизайна (ООД), которые популяризовал дядя Боб Мартин. SOLID — это акроним для:

S – SRP – Принцип единственной ответственности (Single Responsibility Principle)
O – OCP – Принцип открытости/закрытости (Open Closed Principle)
L – LSP – Принцип подстановки Барбары Лисков (Liskov Substitution Principle)
I – ISP – Принцип разделения интерфейса (Interface Segregation Principle)
D – DIP – Принцип инверсии зависимостей (Dependency Inversion Principle)
https://habrahabr.ru/post/343966/
Хабрахабр
Принципы SOLID в действии: от Slack до Twilio
Похоже, что в наши дни RESTful API существует абсолютно для всего. От платежей до бронирования столиков, от простых уведомлений до развёртывания виртуальных... (53 kB)


Ivanushka 
[10:38 AM] 
@Viktor Спасибо. Изучу.


Viktor [10:51 AM] 
не особо внимательно, сам читал в пол глаза :smiley:


anpotashev [4:37 PM] 
Привет!
Кто может помочь с jpql?
Надо чтобы на выходе было что-то вроде: (edited)


anpotashev [4:41 PM] 
added this Java snippet
select
*
from
restaurant
left join
(select * from vote where date='today') votes1_
on restaurant.id=votes1_.restaurant_id
Add Comment Collapse



Дима Жуков 
[4:44 PM] 
left join (select * from vote) нельзя ли заменить просто left join vote where


[4:44] 
ну или on вместо where



[4:45] 
?


anpotashev [5:01 PM] 
В этом случае в результате не будет тех у кого нет vote в этот день


Дима Жуков 
[5:11 PM] 
аааа, просто если без подготовки или по не знанию даже, глянуть, то бьет по глазам конструкция


anpotashev [5:14 PM] 
Ответ нашел. Отбой.


grigory.kislin [11:04 PM] 
@anpotashev лично мое мнение- НЕ надо этого


[11:06] 
@Ivanushka
> у нас 2 репозитория и 2 сервиса (User, Meal) сделано это, я так понимаю, в учебных целях, или нет? В нашем проекте хочу обойтись одним,
в реальном проекте сотни сервисов и репозиториев.... неужели приходит  в голову мысль слепить их в один?
> обычно 1 репозиторий отвечает за 1 таблицу
не строго. у нас например User+Role в одном репозитории/сервисе


russell [10:56 PM] 
Подскажите, а надо ли писать общий дженерик интерфейс для круда в сервисе?



----- Today December 8th, 2017 -----
Dmitry Neustupov [7:41 AM] 
@russell 16: Предпочтительно использовать DATA-JPA (можно без лишней делегации, напрямую из сервиса/контроллера дергать Repository). В случае JPA позаботьтесь о своем собственном generic DAO.



alphadoub [9:19 PM] 
Вопрос: по итогу будет код с которым можно будет сравнить своё решение, если ты без проверки дз участвуешь в topjava?

Или действует строго проверка для участвующих с проверкой дз, а те, кто без проверки по итогу и образца не увидят?